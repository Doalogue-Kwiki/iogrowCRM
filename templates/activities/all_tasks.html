<div  class="page-content">
    <div class="loader-container row" ng-show="isLoading">
      <div class="loader-dialog col-md-4 col-md-offset-4 ">
        <div class="loader-content">
          Loading...
        </div>
      </div>
      
    </div>
   <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
      <div id="portlet-config" class="modal ">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button data-dismiss="modal" class="close" type="button"></button>
              <h3>{{ _("Portlet Settings") }}</h3>
            </div>
            <div class="modal-body">
              <p>{{ _("Here will be a configuration form") }}</p>
            </div>
          </div>
        </div>
      </div>
      <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
      <!-- BEGIN PAGE CONTAINER-->
      <div class="" ng-show="immediateFailed">
         <div class="col-md-12">  
          <h1>{{ _("Sign-in Button;") }}</h1>
              <span id="signin">
                  <span id="myGsignin"></span>
              </span>
        </div>
      </div>
              <!--HKA 24.12.2013 Modal before Deleting Account-->
                <!-- BEFORE DELETE MODEL-->
               <div id="beforecloseTask" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                      <h3 id="myModalLabel" class="modal-title">Delete Task</h3>
                    </div>
                    <div class="modal-body">
                       <form id="seletesho" name="deletesho" class="form-horizontal"> 
                        <p>{{_("Are you sure you want to delete selected tasks")}} .</p>
                    </div>
                      <div class="modal-footer">
                        <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                        
                        <input ng-hide="isLoading" ng-click="closeTask()" type="submit" class="btn red" value="Delete this Account">
                        <input ng-show="isLoading" type="submit" class="btn green" value="Loading..." disabled>
                      </div>
                  </form>
                </div>
              </div>
             </div>
               <!-- BEFORE DELETE MODEL END-->
                             <!--HKA 24.12.2013 Modal before Deleting Account-->
                <!-- BEFORE DELETE MODEL-->
               <div id="assigneeTagsToTask" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                      <h3 id="myModalLabel" class="modal-title">Add Tags </h3>
                    </div>
                    <div class="modal-body">
                       <form id="seletesho" name="deletesho" class="form-horizontal"> 
                       <div class="form-group">
                            <select id="select2_sample2" class="form-control select2" multiple>
                              <option ng-repeat="tag in tags" 
                              value='<%=tag.entityKey%>'>
                                <%=tag.name%>
                              </option>
                            </select>
                        </div>
                    </div>
                      <div class="modal-footer">
                        <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                        <input ng-hide="isLoadingTask" ng-click="addTags()" type="submit" class="btn green" value="Add">
                        <input ng-show="isLoadingTask" type="submit" class="btn green" value="Loading..." disabled>
                      </div>
                  </form>
                </div>
              </div>
             </div>
               <!-- BEFORE DELETE MODEL END-->
            <div id="assigneeModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
           <div class="modal-dialog">
              <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel" class="modal-title">
                <i class="fa fa-tasks"></i>
                   {{_("Assign someone to this task")}}</h3>
              </div>
              <div class="modal-body">
                 <form id="addMember" name="addaccount" ng-submit="share(slected_memeber)" class="form-horizontal"> 
                    <div class=''>
                        <input type="text" ng-model="user" typeahead="user as user.google_display_name + ' <' + user.email + '>' for user in users | filter:$viewValue | limitTo:8" typeahead-on-select="selectMember()" class="form-control" placeholder="{{ _('Enter name or email addresse to add people to this group') }}">
                      <div id="assigeeList" class="list-group">
                        <div class="invitation list-group-item" ng-repeat="selected_us in slected_members">
                          <button type="button" class="close" ng-click="unselectMember($index)" data-dismiss="alert"></button>
                          <img class="google-avatar" src="<%= selected_us.google_public_profile_photo_url%>"/>
                            <strong> <%= selected_us.google_display_name %> < <%=selected_us.email%> ></strong>
                        </div>
                      </div>
                    </div>
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                
                <input ng-hide="isLoading" ng-click="addNewContributors()" type="submit" class="btn green" value="{{ _('Add this account') }}">
                <input ng-show="isLoading" type="submit" class="btn green" value="{{ _('Loading...') }}" disabled>
              </div>
               </form>
               </div>
               </div>

       </div>
       <script type="text/javascript">
          $('#assigeeList').slimScroll({
              height: '200px'
          });
       </script>
      <div id="addAccountModal" class="modal  fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
       <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel">{{_("New Task")}}</h3>
              </div>
              <div class="modal-body">
                 <form id="addAccount" name="addaccount"  class="form-horizontal"  ng-keyup="addAccountOnKey(account)"> 
                  <fieldset>
                  
                    

                    <div class="control-group">
                        <label  class="required control-label">{{_("Name")}} *</label>
                       
                        <div class="controls">
                          <input type="text" required  ng-model="account.name">
                          
                        </div>
                    </div>
                    <div class="control-group">
                        <label  class="required control-label">{{_("Type")}}</label>
                       
                        <div class="controls">
                         
                          <select value="Customer" ng-model="account.account_type"> 
                         <option value="Competitor">Competitor</option><option value="Customer">Customer</option><option value="Distributor">Distributor</option><option value="Integrator">Integrator</option><option value="Investor">Investor</option><option value="Partner">Partner</option><option value="Press">Press</option><option value="Prospect">Prospect</option><option value="Reseller">Reseller</option><option value="Supplier">Supplier</option><option value="Vendor">Vendor</option><option value="Other">Other</option></select>
                          
                        </div>
                    </div>
                    <div class="control-group">
                        <label  class="required control-label">{{_("Industry")}} </label>
                       
                        <div class="controls">
                         
                          <select ng-model="account.industry">
                          <option value="">--None--</option><option value="Agriculture">Agriculture</option><option value="Apparel">Apparel</option><option value="Banking">Banking</option><option value="Biotechnology">Biotechnology</option><option value="Chemicals">Chemicals</option><option value="Communications">Communications</option><option value="Construction">Construction</option><option value="Consulting">Consulting</option><option value="Education">Education</option><option value="Electronics">Electronics</option><option value="Energy">Energy</option><option value="Engineering">Engineering</option><option value="Entertainment">Entertainment</option><option value="Environmental">Environmental</option><option value="Finance">Finance</option><option value="Food &amp; Beverage">Food &amp; Beverage</option><option value="Government">Government</option><option value="Healthcare">Healthcare</option><option value="Hospitality">Hospitality</option><option value="Insurance">Insurance</option><option value="Machinery">Machinery</option><option value="Manufacturing">Manufacturing</option><option value="Media">Media</option><option value="Not For Profit">Not For Profit</option><option value="Recreation">Recreation</option><option value="Retail">Retail</option><option value="Shipping">Shipping</option><option value="Technology">Technology</option><option value="Telecommunications">Telecommunications</option><option value="Transportation">Transportation</option><option value="Utilities">Utilities</option><option value="Other">Other</option></select>
                          
                        </div>
                    </div>
                    <hr/>
                    <p> {{ _('Who can access?') }}</p>
                     <div class=''>

                     
                          
                            <label class="radio line">
                            <input type="radio" value="public" ng-model="account.access" />
                             {{ _('public: Anyone within your organization') }}
                            </label>
                            <label class="radio line">
                            <input type="radio"  value="private" ng-model="account.access" />
                            {{ _('private: only you and your collaborators') }}
                            </label>  
                           
                       
                      
                    </div>
                    </fieldset>
                
              </div>
              <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">{{_("Cancel")}}</button>
                
                <input ng-hide="isLoading" ng-click="save(account)" type="submit" class="btn green" value="{{ _('Add this account') }}">
                <input ng-show="isLoading" type="submit" class="btn green" value="{{ _('Loading...') }}" disabled>
              </div>
               </form>
            </div>
        </div>
       </div>
      <div class="" ng-show="isSignedIn">
        
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="row"> 
          <div class="col-md-12">
            <h2 class="page-title">{{ _("Tasks") }} 
                <!--img src="/static/img/test_loader.gif" ng-show="isLoading" style="margin-top: -5px !important;" class="pull-right" style="height: 40px;"-->

            </h2>  
            <hr/>
            
          </div>
        </div>
          <!-- Filtering and sorting -->
          <div class="row">
          <div class="col-md-9">
            <div class="row">
              <div class="col-md-12">
                <form ng-submit="addNewTask()" class="newTaskForm">
                    <div class="form-group">
                      <div class="input-icon right">
                        <input taggable taggabledata="taggableOptions" ng-model="newTask.title" id="new_task_text" class="form-control"  placeholder="Add new task ..." autofocus/>
                      </div>
                    </div>
                </form>
                <div>
                  <div class="newTask-meta pull-right">
                    <datetimepick icon-class='fa fa-bell-o' label-format='MMM d, h:mm a' ng-model='newTask.reminder' class="new-task-reminder pull-right"></datetimepick>
                     <datetimepick ng-model='newTask.due' class="new-task-date pull-right" label-format='MMM d, h:mm a'></datetimepick>
                  </div>  
                </div>
              </div>
            </div>
              <!-- BEGIN PORTLET-->
              <div id="account-tab" class="portlet paddingless">
                <div class="portlet-body">
                  <div class="tabbable tabbable-custom">
                  <ul class="nav nav-tabs">
                      <li class="ng-tab" ng-class="{active: selectedTab == 1}"><a ng-click="selectedTab = 1;allTasks();">{{ _("All Tasks") }}</a></li>
                      <li class="ng-tab" ng-class="{active: selectedTab == 2}"><a ng-click="selectedTab = 2;urgentTasks();" >{{ _("Urgent Tasks") }}</a></li>
                      <li class="ng-tab" ng-class="{active: selectedTab == 3}"><a ng-click="selectedTab = 3;createdByMe('{{ME}}');">{{ _("Created by Me") }}</a></li>
                      <li class="ng-tab" ng-class="{active: selectedTab == 4}"><a ng-click="selectedTab = 4;assignedToMe('{{ME}}');">{{ _("Assigned to Me") }}</a></li>
                  </ul>
                  <div class="tab-content">
                      <div class="tab-pane active " id="tab_1_1" ng-show="selectedTab == 1">
                          <div class="row tasksList">
                            <div class="col-md-12">
                                <ul class="list-group">
                                    <li class="task-actions list-group-item task-actions">
                                     <div class="row">
                                     <div class="col-md-12">
                                       <form id="task_actions" class="form-inline" role="form">
                                       <div class="row">
                                       <label class="col-xs-1  col-md-1">
                                           <input type="checkbox" ng-checked="isSelectedAll" ng-click="select_all_tasks($event)">  
                                       </label>
                                       <div class="col-xs-7  col-md-7">
                                        <button  ng-show="status=='pending'" class="btn btn-sm btn-default task_action" ng-click="beforecloseTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-lock"></i>
                                          <span class="btn-text">
                                            Close  
                                          </span>
                                        </button>
                                         <button  ng-show="status=='closed'" class="btn btn-sm btn-default task_action" ng-click="reopenTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-unlock"></i>
                                        <span class="btn-text">
                                        Reopen
                                        </span>
                                        </button>
                                        <button ng-click="showAssigneeTags()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-tags"></i>
                                         <span class="btn-text">
                                            Tags
                                         </span>
                                        </button>
                                        <button ng-click="assigneeModal()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                          <i class="fa fa-mail-forward"></i>
                                           <span class="btn-text">
                                            Assignee
                                           </span>
                                        </button>
                                        </div>
                                      </form>
                                        </div>
                                    </div>
                                  </li>
                                   <li  ng-repeat="task in tasks" class="list-group-item" droppable ng-drop="dropTag(task)" id="task_<%=$index%>">
                                     <div class="row">
                                        <label class="col-md-1 col-xs-1">
                                            <input type="checkbox" ng-click="select_task(task,$index,$event)" ng-checked="isSelected()">  
                                        </label>
                                       <h4 ng-dblclick="edit_task(task)" ng-show="edited_task!=task" class="col-md-6 col-xs-10 list-group-item-heading"
                                       ng-class= "{task_closed: task.status=='closed'}">
                                       <i class="fa fa-dot-circle-o status_color" style="color:<%= task.status_color%>;" data-toggle="tooltip" data-placement="top" title="<%= task.status_label %>" ></i>
                                          <a href="/#/tasks/show/<%= task.id %>"> <%= task.title %></a> 
                                       </h4>
                                       <div ng-show="edited_task==task" class="col-md-6 col-xs-7">
                                       <form ng-submit="done_edit_task(task)">
                                          <input ng-type="text" class="form-control inlineEditTask" ng-blur="done_edit_task(task)" ng-model="task.title">
                                       </form>
                                         
                                       </div>
                                        <div class="col-md-5 col-xs-12">
                                            <span ng-repeat="task_tag in task.tags" class="pull-right task-label task-tag badge" style="background-color: <%=task_tag.color%>;color:<%=idealTextColor(task_tag.color)%>;">
                                                <%= task_tag.name %>
                                            </span>
                                            <span ng-repeat="assignee in task.assignees" class="pull-right">
                                               <a href="#"> @<%= assignee.display_name %></a>
                                            </span>
                                        </div>
                                    </div>
                                     <div class="row">
                                      <p class="col-md-11 col-md-offset-1 list-group-item-text">
                                         <span ng-show="task.created_by">Opened by:<a href="#"> <%= task.created_by.display_name %></a></span> <span ng-show="task.about">{{ _('related to') }}<a href="<%= getUrl(task.about.kind,task.about.id); %>"> <%= task.about.name %></a></span>
                                         
                                      </p>
                                      </div>
                                  </li>
                                </ul>
                              </div><!-- / col-md-12-->
                          </div> <!-- / tasksList-->
                      </div>
                       <div class="tab-pane active" id="tab_1_2" ng-show="selectedTab == 2">
                          <div class="row tasksList">
                            <div class="col-md-12">
                                <ul class="list-group">
                                    <li class="task-actions list-group-item task-actions">
                                     <div class="row">
                                     <div class="col-md-12">
                                       <form id="task_actions" class="form-inline" role="form">
                                       <div class="row">
                                       <label class="col-xs-1  col-md-1">
                                           <input type="checkbox" ng-checked="isSelectedAll" ng-click="select_all_tasks($event)">  
                                       </label>
                                       <div class="col-xs-7  col-md-7">
                                        <button  ng-show="status=='pending'" class="btn btn-sm btn-default task_action" ng-click="beforecloseTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-lock"></i>
                                          <span class="btn-text">
                                            Close  
                                          </span>
                                        </button>
                                         <button  ng-show="status=='closed'" class="btn btn-sm btn-default task_action" ng-click="reopenTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-unlock"></i>
                                        <span class="btn-text">
                                        Reopen
                                        </span>
                                        </button>
                                        <button ng-click="showAssigneeTags()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-tags"></i>
                                         <span class="btn-text">
                                            Tags
                                         </span>
                                        </button>
                                        <button ng-click="assigneeModal()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                          <i class="fa fa-mail-forward"></i>
                                           <span class="btn-text">
                                            Assignee
                                           </span>
                                        </button>
                                        </div>
                                      </form>
                                        </div>
                                    </div>
                                  </li>
                                   <li  ng-repeat="task in tasks" class="list-group-item" droppable ng-drop="dropTag(task)" id="task_<%=$index%>">
                                     <div class="row">
                                        <label class="col-md-1 col-xs-1">
                                            <input type="checkbox" ng-click="select_task(task,$index,$event)" ng-checked="isSelected()">  
                                        </label>
                                       <h4 ng-dblclick="edit_task(task)" ng-show="edited_task!=task" class="col-md-6 col-xs-10 list-group-item-heading"
                                       ng-class= "{task_closed: task.status=='closed'}">
                                       <i class="fa fa-dot-circle-o status_color" style="color:<%= task.status_color%>;" data-toggle="tooltip" data-placement="top" title="<%= task.status_label %>"></i>
                                        <%= task.title %>
                                       </h4>
                                       <div ng-show="edited_task==task" class="col-md-6 col-xs-7">
                                       <form ng-submit="done_edit_task(task)">
                                          <input ng-type="text" class="form-control inlineEditTask" ng-blur="done_edit_task(task)" ng-model="task.title">
                                       </form>
                                         
                                       </div>
                                        <div class="col-md-5 col-xs-12">
                                            <span ng-repeat="task_tag in task.tags" class="pull-right task-label badge badge-roundless" style="background-color: <%=task_tag.color%>;color:<%=idealTextColor(task_tag.color)%>;">
                                                <%= task_tag.name %>
                                            </span>
                                            <span ng-repeat="assignee in task.assignees" class="pull-right">
                                               <a href="#"> @<%= assignee.display_name %></a>
                                            </span>
                                        </div>
                                    </div>
                                     <div class="row">
                                      <p class="col-md-11 col-md-offset-1 list-group-item-text">
                                         <span ng-show="task.created_by">Opened by:<a href="#"> <%= task.created_by.display_name %></a></span> <span ng-show="task.about">{{ _('related to') }}<a href="#"> <%= task.about.name %></a></span>
                                         <!--<span>Closed by:<a href="#">Transline</a></span>-->
                                      </p>
                                      </div>
                                  </li>
                                </ul>
                              </div><!-- / col-md-12-->
                          </div>
                      </div>
                       <div class="tab-pane active" id="tab_1_3" ng-show="selectedTab == 3">
                            <div class="row tasksList">
                            <div class="col-md-12">
                                <ul class="list-group">
                                    <li class="task-actions list-group-item task-actions">
                                     <div class="row">
                                     <div class="col-md-12">
                                       <form id="task_actions" class="form-inline" role="form">
                                       <div class="row">
                                       <label class="col-xs-1  col-md-1">
                                           <input type="checkbox" ng-checked="isSelectedAll" ng-click="select_all_tasks($event)">  
                                       </label>
                                       <div class="col-xs-7  col-md-7">
                                        <button  ng-show="status=='pending'" class="btn btn-sm btn-default task_action" ng-click="beforecloseTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-lock"></i>
                                          <span class="btn-text">
                                            Close  
                                          </span>
                                        </button>
                                         <button  ng-show="status=='closed'" class="btn btn-sm btn-default task_action" ng-click="reopenTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-unlock"></i>
                                        <span class="btn-text">
                                        Reopen
                                        </span>
                                        </button>
                                        <button ng-click="showAssigneeTags()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-tags"></i>
                                         <span class="btn-text">
                                            Tags
                                         </span>
                                        </button>
                                        <button ng-click="assigneeModal()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                          <i class="fa fa-mail-forward"></i>
                                           <span class="btn-text">
                                            Assignee
                                           </span>
                                        </button>
                                        </div>
                                      </form>
                                        </div>
                                    </div>
                                  </li>
                                   <li  ng-repeat="task in tasks" class="list-group-item" droppable ng-drop="dropTag(task)" id="task_<%=$index%>">
                                     <div class="row">
                                        <label class="col-md-1 col-xs-1">
                                            <input type="checkbox" ng-click="select_task(task,$index,$event)" ng-checked="isSelected()">  
                                        </label>
                                       <h4 ng-dblclick="edit_task(task)" ng-show="edited_task!=task" class="col-md-6 col-xs-10 list-group-item-heading"
                                       ng-class= "{task_closed: task.status=='closed'}">
                                       <i class="fa fa-dot-circle-o status_color" style="color:<%= task.status_color%>;" data-toggle="tooltip" data-placement="top" title="<%= task.status_label %>"></i>
                                        <%= task.title %>
                                       </h4>
                                       <div ng-show="edited_task==task" class="col-md-6 col-xs-7">
                                       <form ng-submit="done_edit_task(task)">
                                          <input ng-type="text" class="form-control inlineEditTask" ng-blur="done_edit_task(task)" ng-model="task.title">
                                       </form>
                                         
                                       </div>
                                        <div class="col-md-5 col-xs-12">
                                            <span ng-repeat="task_tag in task.tags" class="pull-right task-label badge badge-roundless" style="background-color: <%=task_tag.color%>;color:<%=idealTextColor(task_tag.color)%>;">
                                                <%= task_tag.name %>
                                            </span>
                                            <span ng-repeat="assignee in task.assignees" class="pull-right">
                                               <a href="#"> @<%= assignee.display_name %></a>
                                            </span>
                                        </div>
                                    </div>
                                     <div class="row">
                                      <p class="col-md-11 col-md-offset-1 list-group-item-text">
                                         <span ng-show="task.created_by">Opened by:<a href="#"> <%= task.created_by.display_name %></a></span> <span ng-show="task.about">{{ _('related to') }}<a href="#"> <%= task.about.name %></a></span>
                                         <!--<span>Closed by:<a href="#">Transline</a></span>-->
                                      </p>
                                      </div>
                                  </li>
                                </ul>
                              </div><!-- / col-md-12-->
                          </div>
                      </div>
                       <div class="tab-pane active" id="tab_1_4" ng-show="selectedTab == 4">
                            <div class="row tasksList">
                            <div class="col-md-12">
                                <ul class="list-group">
                                    <li class="task-actions list-group-item task-actions">
                                     <div class="row">
                                     <div class="col-md-12">
                                       <form id="task_actions" class="form-inline" role="form">
                                       <div class="row">
                                       <label class="col-xs-1  col-md-1">
                                           <input type="checkbox" ng-checked="isSelectedAll" ng-click="select_all_tasks($event)">  
                                       </label>
                                       <div class="col-xs-7  col-md-7">
                                        <button  ng-show="status=='pending'" class="btn btn-sm btn-default task_action" ng-click="beforecloseTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-lock"></i>
                                          <span class="btn-text">
                                            Close  
                                          </span>
                                        </button>
                                         <button  ng-show="status=='closed'" class="btn btn-sm btn-default task_action" ng-click="reopenTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-unlock"></i>
                                        <span class="btn-text">
                                        Reopen
                                        </span>
                                        </button>
                                        <button ng-click="showAssigneeTags()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-tags"></i>
                                         <span class="btn-text">
                                            Tags
                                         </span>
                                        </button>
                                        <button ng-click="assigneeModal()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                          <i class="fa fa-mail-forward"></i>
                                           <span class="btn-text">
                                            Assignee
                                           </span>
                                        </button>
                                        </div>
                                      </form>
                                        </div>
                                    </div>
                                  </li>
                                   <li  ng-repeat="task in tasks" class="list-group-item" droppable ng-drop="dropTag(task)" id="task_<%=$index%>">
                                     <div class="row">
                                        <label class="col-md-1 col-xs-1">
                                            <input type="checkbox" ng-click="select_task(task,$index,$event)" ng-checked="isSelected()">  
                                        </label>
                                       <h4 ng-dblclick="edit_task(task)" ng-show="edited_task!=task" class="col-md-6 col-xs-10 list-group-item-heading"
                                       ng-class= "{task_closed: task.status=='closed'}">
                                       <i class="fa fa-dot-circle-o status_color" style="color:<%= task.status_color%>;" data-toggle="tooltip" data-placement="top" title="<%= task.status_label %>"></i>
                                        <%= task.title %>
                                       </h4>
                                       <div ng-show="edited_task==task" class="col-md-6 col-xs-7">
                                       <form ng-submit="done_edit_task(task)">
                                          <input ng-type="text" class="form-control inlineEditTask" ng-blur="done_edit_task(task)" ng-model="task.title">
                                       </form>
                                         
                                       </div>
                                        <div class="col-md-5 col-xs-12">
                                            <span ng-repeat="task_tag in task.tags" class="pull-right task-label badge badge-roundless" style="background-color: <%=task_tag.color%>;color:<%=idealTextColor(task_tag.color)%>;">
                                                <%= task_tag.name %>
                                            </span>
                                            <span ng-repeat="assignee in task.assignees" class="pull-right">
                                               <a href="#"> @<%= assignee.display_name %></a>
                                            </span>
                                        </div>
                                    </div>
                                     <div class="row">
                                      <p class="col-md-11 col-md-offset-1 list-group-item-text">
                                         <span ng-show="task.created_by">Opened by:<a href="#"> <%= task.created_by.display_name %></a></span> <span ng-show="task.about">{{ _('related to') }}<a href="#"> <%= task.about.name %></a></span>
                                         <!--<span>Closed by:<a href="#">Transline</a></span>-->
                                      </p>
                                      </div>
                                  </li>
                                </ul>
                              </div><!-- / col-md-12-->
                          </div>
                      </div>
                       <div class="tab-pane active" id="tab_1_5" ng-show="selectedTab == 5">
                            <div class="row tasksList">
                            <div class="col-md-12">
                                <ul class="list-group">
                                    <li class="task-actions list-group-item task-actions">
                                     <div class="row">
                                     <div class="col-md-12">
                                       <form id="task_actions" class="form-inline" role="form">
                                       <div class="row">
                                       <label class="col-xs-1  col-md-1">
                                           <input type="checkbox" ng-checked="isSelectedAll" ng-click="select_all_tasks($event)">  
                                       </label>
                                       <div class="col-xs-7  col-md-7">
                                        <button  ng-show="status=='pending'" class="btn btn-sm btn-default task_action" ng-click="beforecloseTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-lock"></i>
                                          <span class="btn-text">
                                            Close  
                                          </span>
                                        </button>
                                         <button  ng-show="status=='closed'" class="btn btn-sm btn-default task_action" ng-click="reopenTask()" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-unlock"></i>
                                        <span class="btn-text">
                                        Reopen
                                        </span>
                                        </button>
                                        <button ng-click="showAssigneeTags()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                        <i class="fa fa-tags"></i>
                                         <span class="btn-text">
                                            Tags
                                         </span>
                                        </button>
                                        <button ng-click="assigneeModal()" class="btn btn-sm btn-default task_action" ng-class="{disabled: selected_tasks.length==0}">
                                          <i class="fa fa-mail-forward"></i>
                                           <span class="btn-text">
                                            Assignee
                                           </span>
                                        </button>
                                        </div>
                                      </form>
                                        </div>
                                    </div>
                                  </li>
                                   <li  ng-repeat="task in tasks" class="list-group-item" droppable ng-drop="dropTag(task)" id="task_<%=$index%>">
                                     <div class="row">
                                        <label class="col-md-1 col-xs-1">
                                            <input type="checkbox" ng-click="select_task(task,$index,$event)" ng-checked="isSelected()">  
                                        </label>
                                       <h4 ng-dblclick="edit_task(task)" ng-show="edited_task!=task" class="col-md-6 col-xs-10 list-group-item-heading"
                                       ng-class= "{task_closed: task.status=='closed'}">
                                       <i class="fa fa-dot-circle-o status_color" style="color:<%= task.status_color%>;" data-toggle="tooltip" data-placement="top" title="<%= task.status_label %>"></i>
                                        <%= task.title %>
                                       </h4>
                                       <div ng-show="edited_task==task" class="col-md-6 col-xs-7">
                                       <form ng-submit="done_edit_task(task)">
                                          <input ng-type="text" class="form-control inlineEditTask" ng-blur="done_edit_task(task)" ng-model="task.title">
                                       </form>
                                         
                                       </div>
                                        <div class="col-md-5 col-xs-12">
                                            <span ng-repeat="task_tag in task.tags" class="pull-right task-label badge badge-roundless" style="background-color: <%=task_tag.color%>;color:<%=idealTextColor(task_tag.color)%>;">
                                                <%= task_tag.name %>
                                            </span>
                                            <span ng-repeat="assignee in task.assignees" class="pull-right">
                                               <a href="#"> @<%= assignee.display_name %></a>
                                            </span>
                                        </div>
                                    </div>
                                     <div class="row">
                                      <p class="col-md-11 col-md-offset-1 list-group-item-text">
                                         <span ng-show="task.created_by">Opened by:<a href="#"> <%= task.created_by.display_name %></a></span> <span ng-show="task.about">{{ _('related to') }}<a href="#"> <%= task.about.name %></a></span>
                                         <!--<span>Closed by:<a href="#">Transline</a></span>-->
                                      </p>
                                      </div>
                                  </li>
                                </ul>
                              </div><!-- / col-md-12-->
                          </div>
                      </div>
                  </div>
                </div>
                </div>
              </div>
          </div>
          <script type="text/javascript">
              $('#slimtest1').slimScroll({
                    height: '20px'
                });
          </script>
          <div class="col-md-3">
              <div class="portlet">
                <div class="portlet-title">
                  <div class="caption">
                    <i class="fa fa-reorder"></i>Tags
                  </div>
                  <!--div class="tools">
                      <a href="javascript:;" class="collapse">
                      </a>
                      <a href="#portlet-config" data-toggle="modal" class="config">
                      </a>
                      <a href="javascript:;" class="reload">
                      </a>
                      <a href="javascript:;" class="remove">
                    </a>
                  </div-->
                </div>
                <div class="portlet-body">
                <ul class="list-group tags-list">
                  <li  ng-repeat="tag_item in tags" class="list-group-item tags-list-item" ng-click="selectTag(tag_item,$index,$event)"  >
                  <div class="row">
                    <span  draggable ng-drag="dragTag(tag_item)" style="background-color:<%=tag_item.color%>;color:idealTextColor(<%=tag_item.color%>);" class="with-color" ng-dblclick="editTag(tag_item)" ng-show="(tag_item!=edited_tag)||(!manage_tags)"><%= tag_item.name %> </span>
                    <form ng-submit="doneEditTag(tag_item)" ng-show="(tag_item==edited_tag)&&(manage_tags)">
                      <input ng-blur="doneEditTag(tag_item)" type="text" class="col-md-offset-1 col-md-7 form-control inlineEditTag " ng-model="tag_item.name">
                    </form>
                    <button ng-click="deleteTag(tag_item)" class="close_tag close pull-right" ng-show="manage_tags"></button>
                  </li>
                  <li class="list-group-item tags-list-item" ng-hide="showNewTag" ng-click="showNewTag=true">
                       <a ng-click="" class="btn-link addAnotherPhone">
                        <i class="fa fa-tags"></i>  Add a new tag</a>
                  </li>
                  </div>
                </ul>
               
                <form class="well newTagForm" role="form" ng-show="showNewTag">
                 <button type="button" class="close"  aria-hidden="true" ng-click="showNewTag=false"></button>
                <div class="row">
                  <div class="col-md-12 form-group">
                    <input type="text" ng-model="tag.name" class="form-control" id="tag_name" placeholder="New tag name">
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                      <!-- <input id="tag-col-pick" type="text" class="colorpicker-default form-control" value="#8fff00">-->
                      <ul class="color_pallet_menu">
                        <li ng-repeat="color in color_pallet" ng-click="checkColor(color)" class="color-<%=color.name%>" ng-class='{colorChecked: color.name==tag.color.name}' >
                        </li>
                      </ul>

                  </div>
                  <div class="col-md-6">
                    <input type="submit" ng-hide="isLoading" ng-click="addNewtag(tag)" class="btn green pull-right" value="Add">
                    <input type="submit" ng-show="isLoading" class="btn green pull-right" value="{{ _('Loading...') }}">
                  </div>
                  </div>
                </form>
                <div class="form-group" ng-show="tags">
                  <button class="btn btn-default btn-block" ng-click="manage_tags=!manage_tags;manage()"> Manage Tags
                  </button>
                </div>
                </div>
              </div>
          </div>
          </div> 
          <div class="row">
            <div class="pagination pull-right" ng-hide="isLoading">
                  
                  <ul>
                    <li ng-show="pagination.prev"><button ng-click="listPrevPageItems()" id="sample_editable_1_new" class="btn">
                    {{_("Prev")}} 
                    </button></li>
                    <li ng-repeat="page in pagination.pages" ng-class='{active: page.isCurrent}'><a  href="#/accounts/"><%= page.id %></a></li>
                    <li  ng-show="pagination.next"><button ng-click="listNextPageItems()"  class="btn">
                    {{_("Next")}} 
                    </button></li>
                  </ul>
                </div>
                <h3 class="pagination pull-right" ng-show="isLoading">{{ _('Loading') }}...</h3>
          </div>
        <!-- END PAGE CONTENT-->
      </div>
      <!-- END PAGE CONTAINER--> 
</div>
<script type="text/javascript">
  $("#select2_sample2").select2({
        placeholder: "Click to Select a label",
        allowClear: false
    });
  var handleUniform = function () {
        if (!jQuery().uniform) {
            return;
        }
        var test = $("input[type=radio]:not(.toggle, .star)");
        if (test.size() > 0) {
            test.each(function () {
                if ($(this).parents(".checker").size() == 0) {
                    $(this).show();
                    $(this).uniform();
                }
            });
        }
    }
    handleUniform();
      $('#dat1').datetimepicker({
        language: 'fr',
        pickTime: false
      }).on('show', function(ev) {
           console.log("change date from datepicker");
          }).data('datepicker');
</script>
