<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8" > <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9" > <![endif]-->
<!--[if !IE]><!--> <html xmlns:ng="http://angularjs.org"> <!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
  <meta charset="utf-8" />
  <title>i/oGrow Engine Platform</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="" name="description"/>
  <meta content="" name="author"/>
  <meta name="MobileOptimized" content="320">
  <!-- BEGIN GLOBAL MANDATORY STYLES -->
  <link href="static/bootstrap3/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
   <link href="static/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
  <!-- END GLOBAL MANDATORY STYLES -->
  <!-- BEGIN PAGE LEVEL PLUGIN STYLES -->
  <link href="static/bootstrap3/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/fullcalendar/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/jqvmap/jqvmap/jqvmap.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/plugins/jquery-easy-pie-chart/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css"/>
  <!-- END PAGE LEVEL PLUGIN STYLES -->
  <!-- BEGIN THEME STYLES -->
  <link href="static/bootstrap3/css/style-metronic.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/style.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/style-responsive.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/plugins.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/pages/tasks.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/themes/light.css" rel="stylesheet" type="text/css" id="style_color"/>
   <link rel="stylesheet" href="static/css/datetimepicker.css"/>
  <link href="static/bootstrap3/css/custom.css" rel="stylesheet" type="text/css"/>
  <link href="static/bootstrap3/css/test.css" rel="stylesheet" type="text/css"/>
  <!-- END THEME STYLES -->
  <link rel="shortcut icon" href="favicon.ico"/>

  <script type="text/javascript">
  (function() {
    var po = document.createElement('script');
    po.type = 'text/javascript'; po.async = true;
    po.src = 'https://plus.google.com/js/client:plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
  </script>

</head>
<body class="page-header-fixed">
  <!-- BEGIN HEADER -->   
  <div class="header navbar navbar-default navbar-fixed-top">
    <!-- BEGIN TOP NAVIGATION BAR -->
    <div class="header-inner">
      <!-- BEGIN LOGO -->
      <a class="navbar-brand" href="index.html">
        <img src="static/bootstrap3/img/IO_Grow_min.png" alt="logo" class="img-responsive"/>
      </a>         
      <!-- END LOGO -->
      <!-- BEGIN RESPONSIVE MENU TOGGLER -->
      <a href="javascript:;" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <img src="static/img/sidebar-toggler-light.jpg" alt=""/>
      </a>
      <!-- END RESPONSIVE MENU TOGGLER -->
      <!-- BEGIN TOP NAVIGATION MENU -->
      <div id="navbarSearch">
        <form id="navbarSearchForm" ng-controller="SearchFormController" class="navbar-form ng-pristine ng-valid " ng-submit="executeSearch(searchQuery)" role="search">
              <div class="form-group">
                <input type="text" ng-model="searchQuery" typeahead="result as result.title + ' (' + result.type + ')' for result in results | filter:$viewValue | limitTo:8" typeahead-on-select="selectResult()" class="form-control" placeholder="Search">
              </div>  
               <button class="gbqfb gbqfb-hvr"><span class="gbqfi"></span></button>                              
        </form>
      </div><!--/navbarSearch-->
           
        <!-- END RESPONSIVE MENU TOGGLER -->            
        <!-- BEGIN TOP NAVIGATION MENU --> 
                    
        <ul class="nav navbar-nav pull-right">      
              <li class="dropdown user">
                <a href="/live/companies/{{org_id}}/" target="new" class="dropdown-toggle">       
                  <span class="username">
                    My company
                  </span>
                </a>        
              </li>
              <li class="dropdown user" id="header_task_bar">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true" >
                <img alt="" src="static/bootstrap3/img/glyphicons_156_show_thumbnails.png" width="18">
                  <span class="username">
                    {{active_app.label}}
                  </span>
                  <i class="fa fa-angle-down"></i>      
                </a>
                <ul id="dropdown-menu-list"class="dropdown-menu extended">
                  <li>
                    <ul class="dropdown-menu-list scroller">
                       {%for application in apps %}
                        <li class="gb_a">
                          <a href="/apps/{{ application.id }}">
                          <i class="fa fa-user"></i>
                          <span class="task">
                            <span class="desc">
                              {{application.label}}
                            </span>
                          </span>               
                          </a>
                        </li> 
                       {%endfor%}                             
                    </ul>
                  </li>       
                </ul>
              </li>
              <!-- END TODO DROPDOWN -->
              <!-- BEGIN USER LOGIN DROPDOWN -->
              <li class="dropdown user">
                <a href="{{user.google_public_profile_url}}" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                  <img alt="" src="https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=29"/>
                  <span class="username">
                    {{user.google_display_name}}
                  </span>
                </a>        
              </li>
              <!-- END USER LOGIN DROPDOWN -->
        </ul>       
        <!-- END TOP NAVIGATION MENU --> 
      </div>
    </div><!--navbar inner-->
    <!-- END TOP NAVIGATION BAR -->
</div>
  <div class="modal fade"  id="errorModal"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
              <h3 id="myModalLabel">{{_("Error")}}</h3>
            </div>
            <div class="modal-body">
                <p>An error has occured. Please try again</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn default" data-dismiss="modal">{{_("Close")}}</button>
            </div>
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div>
      <!-- /.modal -->
<div class="page-container">

  <!-- BEGIN SIDEBAR -->
  <div class="page-sidebar-wrapper">
    <div class="page-sidebar navbar-collapse collapse">
        <!-- BEGIN SIDEBAR MENU -->
        <ul class="page-sidebar-menu">
          {% for tab in tabs %}
              <li id="id_{{tab.name}}" class="start">
                <a href="{{ tab.url }}">
                <i class="fa fa-home"></i>
                <span class="title">
                  {{tab.label}}
                </span>       
                </a>
              </li>
           {% endfor %}                     
        </ul>
        <!-- END SIDEBAR MENU -->
    </div>  
  </div>  
  <div class="ng-view-container" ng-view>

  </div><!--/ng-view-container-->  
</div>
<!-- END CONTAINER -->

<!-- BEGIN FOOTER -->
<div class="footer">
  <div class="footer-inner">
         2013 &copy; i/oGrow.
  </div>
  <div class="footer-tools">
   <!--  <span class="go-top">
      <i class="fa fa-angle-up"></i>
    </span> -->
  </div>
</div>
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->   
  <script src="static/plugins/jquery-2.0.3.min.js"  type="text/javascript"></script>
  <script src="static/bootstrap3/plugins/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
  <script src="static/app/scripts/vendor/select2.min.js" ></script>
   <script src="static/app/scripts/vendor/angular.js" ></script>
   <script src="static/app/scripts/vendor/ui-select2.js" ></script>
  <script type="text/javascript">
    window.is_signed_in = false;
    function auth() {
        var config = {
      'client_id': '{{CLIENT_ID}}',
          'scope': 'https://www.googleapis.com/auth/userinfo.email',
          'immediate' : true
        };
        gapi.auth.authorize(config, function(authResult) {
          console.log('in authCallback');
          console.log(authResult);
          if (authResult && !authResult.error){
              console.log('login complete');
              console.log(gapi.auth.getToken());
              window.logged_in = true;  
          } else{
            var config_for_new = {
              'client_id': '{{CLIENT_ID}}',
              'scope': 'https://www.googleapis.com/auth/userinfo.email',
              'immediate' : false
             };
            gapi.auth.authorize(config_for_new);

          }
          
        });
      }
      var apisToLoad;
  var callback = function() {
    console.log('callback');
    if (--apisToLoad == 0) {
      signin(true, userAuthed);

    }
  }

    function loadGapi() {
       window.is_signed_in = false;
       window.authResult = undefined;
       var apisToLoad;




       var ROOT = '/_ah/api';

  //var ROOT = 'https://gcdc2013-iogrow.appspot.com/_ah/api';





            var callback = function() {
        if (--apisToLoad == 0) {
          apiLoaded();
        }
       }

      apisToLoad = 2; // must match number of calls to gapi.client.load()
      console.log('before loading');
      gapi.client.load('crmengine', 'v1', callback, ROOT);
      gapi.load('picker', {'callback': callback});
      
      
    }
    function apiLoaded(){

      // When the API is loaded start angularJS app
      var $injector = angular.bootstrap(document, ['crmEngine']); 
            console.log('angular bootstraped');
      console.log('before redirection');
      if (!window.location.hash){
      window.location.replace('{{active_app.url}}');
      };
    }

    function signin(mode, callback) {
      gapi.auth.authorize({client_id: "{{CLIENT_ID}}",
        scope: "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/calendar", immediate: mode},
        callback);
    }
    

    function userAuthed() {
      
          
          var $injector = angular.bootstrap(document, ['crmEngine']); 
            console.log('angular bootstraped');
          
          // User is signed in, call my Endpoint
      
     
    }

    function callbackoauth(){
       console.log('oauth2 loaded');
    }

  </script>

  <script src="https://apis.google.com/js/client.js?onload=loadGapi">
  </script>

  <script src="static/bootstrap3/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script>
  <script src="static/bootstrap3/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="static/app/scripts/vendor/ui-bootstrap-0.5.0.js" ></script>
  <script src="static/app/scripts/vendor/ui-bootstrap-tpls-0.5.0.js"></script>
  <script src="static/app/scripts/vendor/moment.min.js"></script>
  <script src="static/app/scripts/vendor/datetimepicker.js"></script>



  <script src="static/app/scripts/services/authservices.js"></script>
  <script src="static/app/scripts/services/mapservices.js"></script>
  <script src="static/app/scripts/services/productservices.js"></script>
  <script src="static/app/scripts/services/accountservices.js"></script>
  <script src="static/app/scripts/services/contactservices.js"></script>
  <script src="static/app/scripts/services/opportunityservices.js"></script>
  <script src="static/app/scripts/services/needservices.js"></script>
  

  <!--script src="static/app/scripts/services/services.js" ></script-->
  <script src="static/app/scripts/services/topicservices.js" ></script>
  <script src="static/app/scripts/services/taskservices.js" ></script>
  <script src="static/app/scripts/services/eventservices.js" ></script>
  <script src="static/app/scripts/services/leadservices.js" ></script>
  <script src="static/app/scripts/services/userservices.js"></script>
  <script src="static/app/scripts/services/groupservices.js"></script>
  <script src="static/app/scripts/services/liveservices/showservices.js" ></script>
  <script src="static/app/scripts/services/liveservices/feedbackservices.js" ></script>
  <script src="static/app/scripts/services/liveservices/companyprofileservices.js" ></script>
  <script src="static/app/scripts/services/noteservices.js" ></script>
  <script src="static/app/scripts/services/commentservices.js" ></script>
   <script src="static/app/scripts/services/settingservices.js" ></script>

  <script src="static/app/scripts/app.js" ></script>
   <script src="static/app/scripts/controllers/productcontrollers.js" ></script>
   <script src="static/app/scripts/controllers/searchcontrollers.js" ></script>
  <script src="static/app/scripts/controllers/accountcontrollers.js" ></script>
  <script src="static/app/scripts/controllers/contactcontroller.js"></script>  
  <script src="static/app/scripts/controllers/opportunitycontroller.js" ></script>
  <script src="static/app/scripts/controllers/livecontrollers/showcontrollers.js" ></script>
  <script src="static/app/scripts/controllers/livecontrollers/productvideoscontrollers.js" ></script>
  <script src="static/app/scripts/controllers/livecontrollers/customerstoriescontrollers.js" ></script>
   <script src="static/app/scripts/controllers/livecontrollers/feedbackscontrollers.js" ></script>
  <script src="static/app/scripts/controllers/notecontrollers.js"></script> 
  <script src="static/app/scripts/controllers/taskcontrollers.js"></script>
  <script src="static/app/scripts/controllers/eventcontrollers.js"></script>
  <!--Admin controllers-->
  <script src="static/app/scripts/controllers/usercontrollers.js" ></script>
  <script src="static/app/scripts/controllers/groupcontrollers.js" ></script>
  <script src="static/app/scripts/controllers/settingscontrollers.js" ></script>
  
  <script src="static/app/scripts/controllers/livecontrollers/comp_profilecontrollers.js"></script>
  <script src="static/app/scripts/controllers/leadcontrollers.js" ></script>

  <script src="static/app/scripts/services/leadservices.js" ></script>
  <script src="static/app/scripts/controllers/casecontrollers.js" ></script>
  <script src="static/app/scripts/services/caseservices.js" ></script>
  <script src="static/app/scripts/controllers/needcontrollers.js" ></script>


  
  <!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
  <!--<script src="static/plugins/jquery-ui/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      -->
  
   <script type="text/javascript" src="static/app/scripts/vendor/bootstrap-datetimepicker.min.js"></script>
  <script src="static/bootstrap3/plugins/bootstrap-hover-dropdown/twitter-bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
  <!--[if lt IE 9]>
  <script src="static/plugins/excanvas.min.js"></script>
  <script src="static/plugins/respond.min.js"></script>  
  <![endif]-->   
  <script src="static/bootstrap3/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
  <script src="static/bootstrap3/plugins/jquery.blockui.min.js" type="text/javascript"></script>
  <script src="static/bootstrap3/plugins/jquery.cokie.min.js" type="text/javascript"></script>
  <script src="static/bootstrap3/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
  <script src="static/plugins/bootstrap-switch/static/js/bootstrap-switch.js" type="text/javascript" ></script>
  
  <script src="static/app/scripts/vendor/wysihtml5-0.3.0.min.js" ></script>
  <script src="static/app/scripts/vendor/bootstrap-wysihtml5.js" ></script>
  <script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
  <script src="/static/app/scripts/vendor/jquery.ui.map.min.js"></script> 
  <script type="text/javascript" src="/static/app/scripts/vendor/jquery.ui.map.services.js"></script>

  <!-- END CORE PLUGINS -->
  

 
  <!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>
