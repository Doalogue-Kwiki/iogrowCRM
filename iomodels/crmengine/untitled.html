<?php
/**
 * @package     Joomla.Site
 * @subpackage  Templates.protostar
 *
 * @copyright   Copyright (C) 2005 - 2014 Open Source Matters, Inc. All rights reserved.
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */

defined('_JEXEC') or die;

// Getting params from template
$params = JFactory::getApplication()->getTemplate(true)->params;

$app = JFactory::getApplication();
$doc = JFactory::getDocument();
$this->language = $doc->language;
$this->direction = $doc->direction;

// Detecting Active Variables
$option   = $app->input->getCmd('option', '');
$view     = $app->input->getCmd('view', '');
$layout   = $app->input->getCmd('layout', '');
$task     = $app->input->getCmd('task', '');
$itemid   = $app->input->getCmd('Itemid', '');
$sitename = $app->getCfg('sitename');

//unset($this->_scripts['/media/system/js/mootools-core.js']);

if($task == "edit" || $layout == "form" )
{
	$fullWidth = 1;
} 
else
{
	$fullWidth = 0;
}

// Add JavaScript Frameworks
JHtml::_('bootstrap.framework');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.easing.1.3.js');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.cssAnimate.mini.js');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.touchwipe.min.js');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.mousewheel.min.js');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.themepunch.services.js');
$doc->addScript('templates/' .$this->template. '/services-plugin/js/jquery.columnizer.js');
$doc->addScript(JURI::base().'components/com_social_stream/assets/js/jquery.social.stream.1.5.2.js');
$doc->addScript(JURI::base().'components/com_social_stream/assets/js/jquery.social.stream.wall.1.3.js');

$doc->addScript('templates/' .$this->template. '/js/plugin.js');
$doc->addScript('templates/' .$this->template. '/js/template.js'); 

if($this->language=='en-gb'){
	$doc->addStyleSheet('templates/'.$this->template.'/css/bootstrap.css');
	$doc->addStyleSheet('templates/'.$this->template.'/css/bootstrap-responsive.css');
}elseif($this->language=='ar-aa'){
	$doc->addStyleSheet('templates/'.$this->template.'/css/bootstrap.rtl.css');
	$doc->addStyleSheet('templates/'.$this->template.'/css/bootstrap-responsive.rtl.css');
	$doc->addStyleSheet('templates/'.$this->template.'/css/acss.css');
}

$doc->addStyleSheet('templates/'.$this->template.'/css/css.css');
$doc->addStyleSheet('templates/'.$this->template.'/css/hcss.css');
$doc->addStyleSheet('templates/'.$this->template.'/css/jquery.mCustomScrollbar.css');

// Load optional RTL Bootstrap CSS
JHtml::_('bootstrap.loadCss', false, $this->direction);

// Add current user information
$user = JFactory::getUser();

// Adjusting content width
if ($this -> countModules('sidebar-right') && $this -> countModules('sidebar-left')) {
	$componentWidth = "span6";
} elseif ($this -> countModules('sidebar-right') || $this -> countModules('sidebar-left')) {
	$componentWidth = "span9";
} else {
	$componentWidth = "span12";
}

// Adjusting bottom-a position width
if ($this -> countModules('bottom-b') && $this -> countModules('bottom-c')) {
	$bottomWidth = "span6";
} elseif ($this -> countModules('bottom-b') || $this -> countModules('bottom-c')) {
	$bottomWidth = "span8";
} else {
	$bottomWidth = "span12";
}

// Logo file or site title param
if ($this->params->get('logoFile'))
{
	$logo = '<img src="'. JUri::root() . $this->params->get('logoFile') .'" alt="'. $sitename .'" />';
}
elseif ($this->params->get('sitetitle'))
{
	$logo = '<span class="site-title" title="'. $sitename .'">'. htmlspecialchars($this->params->get('sitetitle')) .'</span>';
}
else
{
	$logo = '<span class="site-title" title="'. $sitename .'">'. $sitename .'</span>';
}
?>
<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<?php echo $this->language; ?>" lang="<?php echo $this->language; ?>" dir="<?php echo $this->direction; ?>">
<head>


	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <link rel="stylesheet" href="http://storage.googleapis.com/iogrow-gs/colorbox.css">
    <script>
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
    var msViewportStyle = document.createElement("style");
    msViewportStyle.appendChild(
        document.createTextNode(
            "@-ms-viewport{width:auto!important}"
        )
    );
    document.getElementsByTagName("head")[0].
        appendChild(msViewportStyle);
}
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59789783-1', 'qbic.qa');
  ga('send', 'pageview');

</script>

	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	
	<jdoc:include type="head" />
	<?php
	// Use of Google Font
	if ($this->params->get('googleFont'))
	{
	?>
		<link href='//fonts.googleapis.com/css?family=<?php echo $this->params->get('googleFontName');?>' rel='stylesheet' type='text/css' />
		
	<?php
	}
	?>
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700' rel='stylesheet' type='text/css'>
    
	<?php
	// Template color
	if ($this->params->get('templateColor'))
	{
	?>
	<style type="text/css">
		body.site
		{
			border-top:0;
			background-color: <?php echo $this->params->get('templateBackgroundColor');?>
		}
		a
		{
			color: <?php echo $this->params->get('templateColor');?>;
		}
		.navbar-inner, .nav-list > .active > a, .nav-list > .active > a:hover, .dropdown-menu li > a:hover, .dropdown-menu .active > a, .dropdown-menu .active > a:hover, .nav-pills > .active > a, .nav-pills > .active > a:hover,
		.btn-primary
		{
			background: <?php echo $this->params->get('templateColor');?>;
		}
		.navbar-inner
		{
			-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 -1px 0 rgba(0, 0, 0, .1), inset 0 30px 10px rgba(0, 0, 0, .2);
			-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 -1px 0 rgba(0, 0, 0, .1), inset 0 30px 10px rgba(0, 0, 0, .2);
			box-shadow: 0 1px 3px rgba(0, 0, 0, .25), inset 0 -1px 0 rgba(0, 0, 0, .1), inset 0 30px 10px rgba(0, 0, 0, .2);
		}
	</style>
	<?php
	}
	?>
	<!--[if lt IE 9]>
		<script src="<?php echo $this->baseurl ?>/media/jui/js/html5.js"></script>
	<![endif]-->
	<script src="http://storage.googleapis.com/iogrow-gs/jquery.colorbox.js"></script>
</head>

<body class="site <?php echo $option
	. ' view-' . $view
	. ($layout ? ' layout-' . $layout : ' no-layout')
	. ($task ? ' task-' . $task : ' no-task')
	. ($itemid ? ' itemid-' . $itemid : '')
	. ($params->get('fluidContainer') ? ' fluid' : '')
    . ' ' .$this->language;
    ?>">

	<!-- <div class="preload"></div>-->
	<div class="scroll_bg"></div>
	<div class="scroll_bg_bld"></div>
	
	<div class="overlay"></div>
		<div id="mobileMenuHolder" class="mobileMenuHolder ">
			<div id="mobileMenuHolderContainer" class="mobileMenuHolderContainer ">
				<div class="MobileMenu ">
					<div class=" menu phone">
						<?php if ($this->countModules('phone-menu')) : ?>
							<jdoc:include type="modules" name="phone-menu" style="none" />
						<?php endif; ?>
					</div>
				</div>
			</div>
		</div>
		<div id="mobileBodyHolder" class="mobileBodyHolder">
			<div id="mobileBodyHolderContainer" class="mobileBodyHolderContainer">	
				<div class="header">
					<div class="container">
						<div class="row-fluid">
							<div class="mobileMenu ">
								<label id="mobileMenuSwitcher"><img src="images/menu-icon.png" alt="--"></label>
							</div>
							<div class="mobileMenu ar">
								<label id="mobileMenuSwitcher" class="mobileMenuSwitcherAR"><img src="images/menu-icon.png" alt="--"></label>
							</div>
						</div>
						<?php if ($this->countModules('header-logo')): ?>
							<div class="header_logo container">
								<div class="row-fluid">
									<jdoc:include type="modules" name="header-logo" />
								</div>
							</div>
						<?php endif; ?>
						<div class="row-fluid">
							<div class="span12 menu menu-l desktop">
                            <div class="centerdiv">
								<?php if ($this->countModules('left-menu')) : ?>
									<jdoc:include type="modules" name="left-menu" style="none" /> 
								<?php endif; ?>
							</div></div>
							<div class="desktop extra" >
								<?php if ($this->countModules('header-extra')) : ?>
									<jdoc:include type="modules" name="header-extra" style="none" />
								<?php endif; ?>
							</div>
						</div>
					</div>
				</div>
				<?php if ($this->countModules('full-top')): ?>
					<div class="top container">
						<div class="row">
							<jdoc:include type="modules" name="full-top" />
						</div>
					</div>
				<?php endif; ?>
				
			<div id="body_content" class="container ">
				<?php
				if($option != 'com_scroller')
				echo '<div class="row">';
				?>
				<?php if ($this->countModules('sidebar-left') && $option != 'com_scroller') : ?>
				<!-- Begin Sidebar -->
				<div id="sidebar" class="span3">
					<div class="sidebar-nav">
						<jdoc:include type="modules" name="sidebar-left" style="xhtml" />
					</div>
				</div>
				<!-- End Sidebar -->
				<?php endif; ?>
				<main id="content" role="main" class="<?php echo ($option != 'com_scroller')?$componentWidth:'';?> clearfix">
						<jdoc:include type="message" />
						<jdoc:include type="component" />	
				</main>		
				<?php if ($this->countModules('sidebar-right') && $option != 'com_scroller') : ?>
				<div id="aside" class="span3">
					<!-- Begin Right Sidebar -->
					<jdoc:include type="modules" name="sidebar-right" style="well" />
					<!-- End Right Sidebar -->
				</div>
				<?php endif; 
				if($option != 'com_scroller')
					echo '</div>';
				?>
			</div>
				<?php if ($this->countModules('full-bottom')): ?>
					<div class="bottom container">
						<div class="row">
							<jdoc:include type="modules" name="full-bottom" />
						</div>
					</div>
				<?php endif; ?>
				<div class="footer desktop">
					<div class="container relative">
						<div class="f_toggle row">
							<div>
								<img class="up" src="images/arrow-u.png" />
								<img class="down" src="images/arrow-d.png" />
							</div>
						</div>
						<div class="row">
							<?php if ($this->countModules('footer-1')) : ?>
								<div class="span2 ">
									<jdoc:include type="modules" name="footer-1" style="none" />	
								</div>
							<?php endif; ?>
							
							<?php if ($this->countModules('footer-2')) : ?>
								<div class="span3">
									<jdoc:include type="modules" name="footer-2" style="none" />	
								</div>
							<?php endif; ?>
							<?php if ($this->countModules('footer-3')) : ?>
								<div class="span3">
									<jdoc:include type="modules" name="footer-3" style="none" />	
								</div>
							<?php endif; ?>
							<?php if ($this->countModules('footer-4')) : ?>
							<div class="span4 f_slider">
								<jdoc:include type="modules" name="footer-4" style="none" />
							</div>
						<?php endif; ?>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="mobileMenuHolder" class="mobileMenuHolder ar ">
		<div id="mobileMenuHolderContainer" class="mobileMenuHolderContainer ">
			<div class="MobileMenu ">
				<div class=" menu phone">
					<?php if ($this->countModules('phone-menu-right')) : ?>
						<jdoc:include type="modules" name="phone-menu-right" style="none" />
					<?php endif; ?>
				</div>
			</div>
		</div>
	</div>
	<p><a class="iframe cboxElement" href="https://s3-us-west-2.amazonaws.com/qbic/wave3_demo_day.html" style="display:none">Outside Webpage (Iframe)</a></p>
		
		
	
<div id="cboxOverlay" style="opacity: 1; cursor: auto; visibility: visible; display: none;"></div><div id="colorbox" class="" role="dialog" tabindex="-1" style="display: none; visibility: visible; top: 82px; left: 349px; position: absolute; width: 742px; height: 513px; opacity: 1; cursor: auto;"><div id="cboxWrapper" style="height: 513px; width: 742px;"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left; width: 700px;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left; height: 471px;"></div><div id="cboxContent" style="float: left; width: 700px; height: 471px;"><div id="cboxTitle" style="float: left; display: block;">Me and my grandfather on the Ohoopee</div><div id="cboxCurrent" style="float: left; display: block;">image 1 of 3</div><button type="button" id="cboxPrevious" style="display: block;">previous</button><button type="button" id="cboxNext" style="display: block;">next</button><button id="cboxSlideshow" style="display: none;"></button><div id="cboxLoadingOverlay" style="float: left; display: none;"></div><div id="cboxLoadingGraphic" style="float: left; display: none;"></div><button type="button" id="cboxClose">close</button></div><div id="cboxMiddleRight" style="float: left; height: 471px;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left; width: 700px;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; max-width: none; display: none;"></div></div><span class="_hsShareImage hsShareImage">&nbsp;</span>
	<jdoc:include type="modules" name="debug" style="none" /> 
	<script type="text/javascript">
		var addthis_config = addthis_config||{};
		addthis_config.data_track_addressbar = false;
      console.log('and then');
      			jQuery(document).ready(function(){
              	console.log('i am ready');
				jQuery(".iframe").colorbox({iframe:true, height:"100%"});
				//Example of preserving a JavaScript event for inline calls.
				jQuery("#click").click(function(){ 
					jQuery('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
					return false;
				});
                  
                  setTimeout(function(){
                   
                    if(!sessionStorage.getItem("QbicOpenDay")){
                       console.log('click to show');
                       jQuery('.iframe').trigger('click');
                       sessionStorage['QbicOpenDay']=true;
                    }
                    }, 2000);
      			
    			//  jQuery( ".apply" ).click(function( event ) {
				// 	  event.preventDefault();
				// 	  jQuery('.iframe').trigger('click');
				// });
				// jQuery( "#menu108" ).click(function( event ) {
				// 	  event.preventDefault();
				// 	  jQuery('.iframe').trigger('click');
				// });
				// jQuery( "#menu301" ).click(function( event ) {
				// 	  event.preventDefault();
				// 	  jQuery('.iframe').trigger('click');
				// });
                  
                  if(window.location.hash=="#newsletter"){jQuery('.newsletter_btn').trigger('click');}
				
				
				
               });
	</script>
	


<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-533262094ffc38d9"></script>
</body>
</html>
