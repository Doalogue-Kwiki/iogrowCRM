<div class="row subHeader action-bar">
    <div class="currentApp">
        <a class="filterItem" href="#" data-toggle="dropdown">
            <span class="active-app"><i class="fa fa-cog"></i> Settings</span> <!--{{_(active_app.label)}}-->
            <i class="icon-angle-down fa fa-angle-down"></i>
        </a>
        <ul class="dropdown-menu">
            {% for application in apps %}
            <li><a href="/apps/{{ application.key.id() }}" data-toggle="modal">{{ _(application.label) }}</a></li>
            {% endfor %}
        </ul>
    </div>
    <div class="subHeaderContent">
        <!--<i class="material-icons">supervisor_account</i>-->
        <div class="col-md-4 active-app"><i class="fa fa fa-list-alt"></i>
            Custom Fields
        </div>
        <span class="action-btns">
            <a class="headerBtn" title="{{ _('Refresh') }}" ng-click="refreshCurrent();">
                <i class="fa fa-repeat"></i>
            </a>
            <a class="headerBtn" title="{{ _('Delete') }}" ng-show="selected_users.length"
               ng-click="deleteUser()">
                <i class="fa fa-trash-o"></i>
            </a>
            <form class="form-inline newLeadForm inline" role="form"
                  ng-show="showInviteForm">
                <div class="form-group sm-group" ng-class="{ 'has-error':email_empty}">
                    <label class="sr-only">Email</label>
                    <input type="email" ng-model="email.email" placeholder="Enter a email"
                           class="form-control ng-pristine ng-invalid ng-invalid-required ng-valid-email">
                </div>
                <button class="btn red jfk-button jfk-button-action" ng-click="inviteNewUser(email)">Invite</button>
                <button ng-click="showInviteForm = false" class="btn btn-default">X</button>
            </form>
            <span ng-hide="showInviteForm">
                <a title="New user" class="btn red newAccountBtnOnscroll pull-right save-btn"
                   ng-click="showInviteForm=true">
                    + <i class="fa fa-user"></i> {{ _('New') }}
                </a>
            </span>
        </span>
    </div>
</div>
<div  class="page-content" style="margin-top: 45px; margin-left: 190px;">
  <div class="loader-container row" ng-show="isLoading">
        <div class="loader-dialog col-md-4 col-md-offset-4 ">
          <div class="loader-content">
            {{_('Loading...')}}
          </div>
        </div>

  </div>

  <div class="" ng-show="immediateFailed">
     <div class="col-md-12">
      <h1>{{_('Sign-in Button;')}}</h1>
          <span id="signin">
              <span id="myGsignin"></span>
          </span>
    </div>
  </div>
  <div class="row" >

        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
      <div class="col-md-offset-1 col-md-9">
          <div class="row">
            <div class="col-md-6">
                <div class="news-blocks blank-card blank-card-twitter newsCard" style="padding: 15px;min-height:initial !important;padding-top: 5px;">
                <h3 style="margin-top:0px;font-size:20px"><i class="fa fa fa-cogs" style="font-size:18px"></i>{{ _(' Custom Fields Builder') }}</h3>
                    <form class="">
                        <div class="row" style="margin-top: 5px;">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="row">
                                        <label class="control-label col-md-3">{{_("Field label")}}</label>
                                        <div class="col-md-9">
                                            <input type="text"  placeholder="{{_('Title')}}" class="form-control" ng-model="customfield.label">
                                        </div>
                                    </div>
                                </div>
                            </div>
                           <!-- <div class="col-md-12">
                                <div class="form-group">
                                    <div class="row">
                                        <label class="control-label col-md-3">{{_("Field Helper")}}</label>
                                        <div class="col-md-9">
                                            <input type="text" placeholder="{{_('Text helper')}}" class="form-control" ng-model="customfield.helper">
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="row">
                                        <label class="control-label col-md-3">{{_("Field type")}}</label>

                                        <div class="col-md-9">
                                            <select class="form-control" ng-model="customfield.type" ng-select="buildElement(customfield)">
                                                <option value="" disabled selected>Select Type</option>
                                                <option value="text">{{_("Text")}}</option>
                                                <option value="paragraph">{{_("Paragraph Text")}}</option>
                                                <option value="multiple_choice">{{_("Multiple choice")}}</option>
                                                <option value="checkbox">{{_("Checkboxes")}}</option>
                                                <option value="list">{{_("Choose from a list")}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" ng-show="customfield.type=='multiple_choice'||customfield.type=='list'">
                                <div class="form-group">
                                    <div class="row">
                                       <!--  <label class="control-label col-md-4">{{_("Field options")}}</label> -->
                                        <div class="col-md-offset-3 col-md-9">
                                             <ul style="padding-left: 0px;padding-top: 5px;list-style: none;" sv-root sv-part="customfield.options">
                                                <li ng-repeat='option in customfield.options' style="padding: 0px;margin-bottom: 5px;" sv-element="opts">
                                                    <span sv-handle style="width: 14%;float: left;line-height: 32px;font-size: 14px;color: gray;" ng-class="{'optionSpace':customfield.options.length<2}"><i  ng-show="customfield.options.length>1" class="fa fa-reorder" style="font-size:12px;cursor:move;"></i> <%=$index+1%>.</span>
                                                    <input type="text"  id="option-<%=$index%>" placeholder="{{_('Title')}}" class="form-control" style="width: 80%;float: left;display: inline-block;" value="<%=option%>" ng-blur="udpateOption($index)">
                                                    <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true" style="opacity: 1; top: 14px;  float: left; margin-top: 12px;margin-left: 5px;width: 10px;line-height: 32px;" ng-click="removeOption(customfield.options,customfield.option)"></button>
                                                    <div class="clearfix"></div>
                                                    </li>
                                            </ul>
                                            <div>

                                                <span style="width: 14%;float: left;line-height: 32px;font-size: 14px;color: gray;padding-left: 18px;">
                                                <%=customfield.options.length+1%>.</span>
                                                <input type="text" placeholder="Add new option.." class="form-control" ng-model="customfield.newOption" ng-click="addOption(customfield.options)" style="width: 80%;float: left;display: inline-block;cursor: pointer;background-color: #F4F4F4!important;">    
                                            </div>       
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="pull-right">
                                    <input ng-click=""  class="btn btn-default" value="Clear" style="margin-right: 5px;">
                                    <input ng-click="buildElement(customfield)" type="submit" class="btn blue" value="Add">
                                </div>
                            </div>
                        </div>
                    </form>

               </div>
            </div>
            <div class="col-md-6">
                 <div class="news-blocks blank-card blank-card-gray newsCard">
                                    <h3 style="margin-top:0px;font-size:20px"><i class="fa fa fa-list-alt" style="font-size:18px"></i>{{ _(' Custom Fields Preview') }}</h3>
                                     <div class="col-md-12" ng-show="customfield.type">
                                        <div class="form-group">
                                            <div class="row">
                                                <label class="control-label col-md-3"><%=customfield.label%></label>

                                                <div class="col-md-9" id="elementContainer" >
                                                    <select class="form-control">
                                                        <option id="elementOptions" value="<%=option%>" ng-repeat="option in customfield.options"><%=option%></option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <ul class="list-unstyled contact-infos showList">

                                        <li ng-repeat="custom in infonodes.customfields">

                                            <form editable-form name="editableCustomFieldForm"
                                                  onbeforesave="inlinePatch('Infonode','customfields', custom.fields[0].field,custom.entityKey,custom.fields[0].value)"
                                                  class="customFieldForm">
                                                <i class="fa fa-gear" ng-hide="editableCustomFieldForm.$visible"></i>
                                              <span editable-text="custom.fields[0].field" e-name="field">
                                                  <%= custom.fields[0].field%>  : </span>
                                                        <span e-name="value" editable-text="custom.fields[0].value">   <%= custom.fields[0].value%> </span>
                                              <span class="page-meta ng-scope" ng-hide="editableCustomFieldForm.$visible">
                                                  <a ng-click="editableCustomFieldForm.$show()"
                                                     class="btn-link addAnotherPhone"><i class="fa fa-pencil"></i></a>
                                              </span>
                                              <span class="page-meta ng-scope" ng-hide="editableCustomFieldForm.$visible">
                                                  <a ng-click="deleteInfonode(custom.entityKey,'customfields')"
                                                     class="btn-link addAnotherPhone"><i class="fa fa-trash-o"></i></a>
                                              </span>
                                               <span ng-show="editableCustomFieldForm.$visible">
                                                  <button type="submit" class="btn btn-primary"
                                                          ng-disabled="editableCustomFieldForm.$waiting">
                                                      Save
                                                  </button>
                                                  <button type="button" class="btn btn-default"
                                                          ng-disabled="editableCustomFieldForm.$waiting"
                                                          ng-click="editableCustomFieldForm.$cancel()">
                                                      Cancel
                                                  </button>
                                                </span>
                                                    </form>
                                                </li>

                                        <li ng-show="showEditCustomFields|| isEmptyArray(infonodes.customfields)">
                                            <div class="">
                                                <form class="form-inline newLeadForm" role="form">
                                                    <div class="form-group " style="width:49%">
                                                        <label class="sr-only"
                                                               for="exampleInputEmail2">{{_('Field')}}</label>
                                                        <input type="text" class="form-control" id="exampleInputEmail2"
                                                               ng-model="customfield.field"
                                                               placeholder="{{_('Enter field name')}}">
                                                    </div>
                                                    <div class="form-group" style="width:49%">
                                                        <label class="sr-only"
                                                               for="exampleInputEmail2">{{_('Value')}}</label>
                                                        <input type="text" ng-enter="addCustomField(customfield)"
                                                               ng-blur="addCustomField(customfield)"
                                                               class="form-control" id="exampleInputEmail2"
                                                               ng-model="customfield.value"
                                                               placeholder="{{_('Enter a value')}}">
                                                    </div>
                                                </form>
                                            </div>
                                        </li>
                                    </ul>
                                     <div class="clearfix"></div>
                                </div>
            </div>
               
         </div>
     </div>
  </div>
</div>